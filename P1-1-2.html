<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‚¬ë‘ì˜ ë¯¸ë¶„ ë°©ì •ì‹ ì‹œë®¬ë ˆì´í„°</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Google Fonts - Noto Sans KR -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #111827; /* bg-gray-900 */
        }
        .gradient-text {
            background: linear-gradient(to right, #F472B6, #EC4899, #D946EF); /* Pink to Fuchsia to Purple */
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        /* ì•„ì½”ë””ì–¸ íŒ¨ë„ ìˆ¨ê¹€ ê¸°ë³¸ê°’ */
        .accordion-content {
            display: none;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        /* ì°¨íŠ¸ ì»¨í…Œì´ë„ˆ */
        .chart-container {
            position: relative;
            height: 60vh; /* ë·°í¬íŠ¸ ë†’ì´ì˜ 60% */
            width: 100%;
            min-height: 450px;
        }
        /* ìˆ˜ì‹ ìŠ¤íƒ€ì¼ */
        .formula {
            font-family: 'Times New Roman', Times, serif;
            font-size: 1.25rem;
            color: #D1D5DB; /* text-gray-300 */
            background: #1F2937; /* bg-gray-800 */
            padding: 1.5rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            border: 1px solid #4B5563;
        }
        /* ì»¤ìŠ¤í…€ ìŠ¬ë¼ì´ë” ìŠ¤íƒ€ì¼ */
        input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 8px;
            background: #374151; /* bg-gray-700 */
            border-radius: 5px;
            outline: none;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: #EC4899; /* accent-pink-600 */
            border-radius: 50%;
            cursor: pointer;
            transition: background 0.2s;
        }
        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: #EC4899;
            border-radius: 50%;
            cursor: pointer;
            border: none;
        }
        input[type="range"]:hover::-webkit-slider-thumb {
            background: #F472B6; /* hover:accent-pink-500 */
        }
        input[type="range"]:hover::-moz-range-thumb {
            background: #F472B6;
        }
    </style>
</head>
<body class="text-gray-200">

    <div class="container mx-auto max-w-7xl px-4 py-16">

        <!-- í—¤ë” -->
        <header class="text-center mb-16">
            <h1 class="text-5xl md:text-6xl font-black mb-6 gradient-text">
                ì‚¬ë‘ì˜ ë¯¸ë¶„ ë°©ì •ì‹
            </h1>
            <p class="text-2xl md:text-3xl font-bold text-gray-100">
                ì˜í¬(x)ì™€ ì² ìˆ˜(y)ì˜ ê°ì • ë³€í™” ì‹œë®¬ë ˆì´ì…˜
            </p>
        </header>

        <!-- ì‹œë®¬ë ˆì´ì…˜ ë©”ì¸ (ê·¸ë¦¬ë“œ) -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">

            <!-- 1. ì»¨íŠ¸ë¡¤ íŒ¨ë„ (L) -->
            <div class="lg:col-span-1 bg-gray-800 p-6 rounded-2xl shadow-xl border border-gray-700 h-fit">
                <h2 class="text-2xl font-bold text-white mb-6 pb-3 border-b border-gray-600">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.835 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.532 1.532 0 012.287-.947c1.372.835 2.942-.734 2.106-2.106a1.532 1.532 0 01-.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01.947-2.287c.835-1.372-.734-2.942-2.106-2.106A1.532 1.532 0 0111.49 3.17zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd" /></svg>
                    ë§¤ê°œë³€ìˆ˜ ì¡°ì‘
                </h2>
                
                <div class="space-y-6">
                    <!-- ì´ˆê¸° ê°ì • -->
                    <div>
                        <label for="param-x0" class="flex justify-between items-center text-sm font-medium text-gray-300">
                            <span>ì˜í¬(x) ì´ˆê¸° ê°ì • (xâ‚€)</span>
                            <span id="val-x0" class="font-bold text-pink-400 text-base">1.0</span>
                        </label>
                        <input type="range" id="param-x0" min="-2" max="2" value="1.0" step="0.1" class="w-full mt-2">
                    </div>
                    <div>
                        <label for="param-y0" class="flex justify-between items-center text-sm font-medium text-gray-300">
                            <span>ì² ìˆ˜(y) ì´ˆê¸° ê°ì • (yâ‚€)</span>
                            <span id="val-y0" class="font-bold text-blue-400 text-base">0.5</span>
                        </label>
                        <input type="range" id="param-y0" min="-2" max="2" value="0.5" step="0.1" class="w-full mt-2" style="accent-color: #3B82F6;">
                    </div>

                    <!-- ìƒí˜¸ì‘ìš© ê³„ìˆ˜ -->
                    <div class="pt-4 border-t border-gray-600">
                        <label for="param-a" class="flex justify-between items-center text-sm font-medium text-gray-300">
                            <span>a (ì˜í¬ ìê¸° ì˜í–¥)</span>
                            <span id="val-a" class="font-bold text-white text-base">-0.1</span>
                        </label>
                        <input type="range" id="param-a" min="-1" max="1" value="-0.1" step="0.05" class="w-full mt-2">
                    </div>
                    <div>
                        <label for="param-b" class="flex justify-between items-center text-sm font-medium text-gray-300">
                            <span>b (ì² ìˆ˜ â†’ ì˜í¬)</span>
                            <span id="val-b" class="font-bold text-white text-base">0.8</span>
                        </label>
                        <input type="range" id="param-b" min="-1" max="1" value="0.8" step="0.05" class="w-full mt-2">
                    </div>
                    <div>
                        <label for="param-e" class="flex justify-between items-center text-sm font-medium text-gray-300">
                            <span>e (ì˜í¬ â†’ ì² ìˆ˜)</span>
                            <span id="val-e" class="font-bold text-white text-base">-0.6</span>
                        </label>
                        <input type="range" id="param-e" min="-1" max="1" value="-0.6" step="0.05" class="w-full mt-2">
                    </div>
                    <div>
                        <label for="param-d" class="flex justify-between items-center text-sm font-medium text-gray-300">
                            <span>d (ì² ìˆ˜ ìê¸° ì˜í–¥)</span>
                            <span id="val-d" class="font-bold text-white text-base">-0.2</span>
                        </label>
                        <input type="range" id="param-d" min="-1" max="1" value="-0.2" step="0.05" class="w-full mt-2">
                    </div>
                </div>

                <!-- í”„ë¦¬ì…‹ ë²„íŠ¼ -->
                <div class="mt-8 pt-6 border-t border-gray-600">
                    <h3 class="text-lg font-semibold text-white mb-3">ê´€ê³„ í”„ë¦¬ì…‹ (ìˆ˜ì •ë¨)</h3>
                    <div class="grid grid-cols-2 gap-3">
                        <button id="preset-destructive" class="w-full px-3 py-2 bg-pink-600 text-white rounded-lg shadow hover:bg-pink-700 transition text-sm font-medium">íŒŒë©¸ì  ê´€ê³„</button>
                        <button id="preset-stable" class="w-full px-3 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 transition text-sm font-medium">ì•ˆì •ì  ì»¤í”Œ</button>
                        <button id="preset-hesitation" class="w-full px-3 py-2 bg-gray-600 text-white rounded-lg shadow hover:bg-gray-700 transition text-sm font-medium">ë§ì„¤ì´ëŠ” ì»¤í”Œ</button>
                        <button id="preset-explosive" class="w-full px-3 py-2 bg-red-600 text-white rounded-lg shadow hover:bg-red-700 transition text-sm font-medium">ì—´ì •ì  ì‚¬ë‘</button>
                    </div>
                </div>
            </div>

            <!-- 2. ê·¸ë˜í”„ ë° í•´ì„ (R) -->
            <div class="lg:col-span-2 space-y-8">
                <!-- ì°¨íŠ¸ -->
                <div class="bg-gray-800 p-6 rounded-2xl shadow-xl border border-gray-700">
                    <h2 class="text-2xl font-bold text-white mb-4">ğŸ“ˆ ê°ì • ë³€í™” ì¶”ì´ (t=50)</h2>
                    <div class="chart-container">
                        <canvas id="loveChart"></canvas>
                    </div>
                </div>
                
                <!-- í•´ì„ -->
                <div class="bg-gray-800 p-8 rounded-2xl shadow-xl border border-gray-700">
                    <h2 class="text-2xl font-bold text-white mb-6 pb-3 border-b border-gray-600">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block mr-2" viewBox="0 0 20 20" fill="currentColor"><path d="M10 2a6 6 0 00-6 6v3.586l-1.707 1.707A1 1 0 003 15v4a1 1 0 001 1h12a1 1 0 001-1v-4a1 1 0 00-.293-.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z" /></svg>
                        í˜„ì¬ ê´€ê³„ í•´ì„ (ë™ì  ë¶„ì„)
                    </h2>
                    <div id="interpretation-text" class="text-lg text-gray-300 leading-relaxed space-y-3">
                        <!-- JSë¡œ ë™ì  ì—…ë°ì´íŠ¸ -->
                    </div>
                </div>
            </div>
        </div>

        <!-- 3. ì‹œë®¬ë ˆì´ì…˜ ì›ë¦¬ (ì•„ì½”ë””ì–¸) -->
        <section class="mt-24">
            <h2 class="text-4xl font-extrabold text-center mb-12 gradient-text">
                ì‹œë®¬ë ˆì´ì…˜ ì‘ë™ ì›ë¦¬
            </h2>
            <div class="max-w-4xl mx-auto space-y-4">
                
                <!-- ì•„ì½”ë””ì–¸ 1: ë¯¸ë¶„ ë°©ì •ì‹ -->
                <div class="accordion-item bg-gray-800 rounded-lg shadow-lg border border-gray-700">
                    <button class="accordion-button w-full flex justify-between items-center text-left p-6">
                        <span class="text-xl font-semibold text-gray-100">1. ì‚¬ë‘ì˜ ë¯¸ë¶„ ë°©ì •ì‹ì´ë€?</span>
                        <svg class="w-6 h-6 text-gray-400 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <div class="accordion-content px-6 pb-6 text-lg">
                        <p class="text-gray-300 leading-relaxed mb-4">
                            ì´ ì‹œë®¬ë ˆì´ì…˜ì€ ë‘ ì‚¬ëŒì˜ ê°ì • 'ë³€í™”ìœ¨'($dx/dt, dy/dt$)ì´ ë‘ ì‚¬ëŒì˜ 'í˜„ì¬ ê°ì •'($x, y$)ì— ì˜í•´ ê²°ì •ëœë‹¤ê³  ê°€ì •í•˜ëŠ” ì„ í˜• ë¯¸ë¶„ ë°©ì •ì‹ ì‹œìŠ¤í…œì„ ê¸°ë°˜ìœ¼ë¡œ í•©ë‹ˆë‹¤.
                        </p>
                        <div class="formula">
                            $\frac{dx}{dt} = a \cdot x + b \cdot y + c$
                            <br>
                            $\frac{dy}{dt} = e \cdot x + d \cdot y + f$
                        </div>
                        <ul class="list-disc list-outside pl-6 mt-4 space-y-2">
                            <li>$x$: ì˜í¬(A)ì˜ ê°ì • ìˆ˜ì¤€</li>
                            <li>$y$: ì² ìˆ˜(B)ì˜ ê°ì • ìˆ˜ì¤€</li>
                            <li>$dx/dt$: ì˜í¬(A)ì˜ ê°ì • ë³€í™” ì†ë„</li>
                            <li>$dy/dt$: ì² ìˆ˜(B)ì˜ ê°ì • ë³€í™” ì†ë„</li>
                        </ul>
                    </div>
                </div>
                
                <!-- ì•„ì½”ë””ì–¸ 2: ë§¤ê°œë³€ìˆ˜ì˜ ì˜ë¯¸ -->
                <div class="accordion-item bg-gray-800 rounded-lg shadow-lg border border-gray-700">
                    <button class="accordion-button w-full flex justify-between items-center text-left p-6">
                        <span class="text-xl font-semibold text-gray-100">2. 6ê°€ì§€ í•µì‹¬ ë§¤ê°œë³€ìˆ˜ì˜ ì˜ë¯¸</span>
                        <svg class="w-6 h-6 text-gray-400 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <div class="accordion-content px-6 pb-6 text-lg">
                        <p class="text-gray-300 leading-relaxed mb-4">
                            ì´ ëª¨ë¸ì˜ ëª¨ë“  ì—­í•™ì€ 6ê°œì˜ ìƒìˆ˜ì— ì˜í•´ ê²°ì •ë©ë‹ˆë‹¤. (ì´ ì‹œë®¬ë ˆì´í„°ì—ì„œëŠ” $c$ì™€ $f$ë¥¼ 0ìœ¼ë¡œ ê³ ì •í•©ë‹ˆë‹¤.)
                        </p>
                        <ul class="list-disc list-outside pl-6 mt-4 space-y-2">
                            <li><strong>$a$ (ì˜í¬ ìê¸° ì˜í–¥):</strong> ì˜í¬ê°€ ìì‹ ì˜ ê°ì •ì— ë¯¸ì¹˜ëŠ” ì˜í–¥
                                <ul class="list-circle list-outside pl-6 text-gray-400">
                                    <li>$a > 0$: ìê¸°ì•  (ê°ì •ì´ ìŠ¤ìŠ¤ë¡œ ì¦í­)</li>
                                    <li>$a < 0$: ìê°€ ì–µì œ (ê°ì •ì´ ìŠ¤ìŠ¤ë¡œ ì‹ìŒ)</li>
                                </ul>
                            </li>
                            <li><strong>$b$ (ì² ìˆ˜ â†’ ì˜í¬):</strong> ì² ìˆ˜ì˜ ê°ì •ì´ ì˜í¬ì—ê²Œ ë¯¸ì¹˜ëŠ” ì˜í–¥
                                <ul class="list-circle list-outside pl-6 text-gray-400">
                                    <li>$b > 0$: ì² ìˆ˜ê°€ ì˜í¬ë¥¼ ê¸ì •ì ìœ¼ë¡œ ë§Œë“¦</li>
                                    <li>$b < 0$: ì² ìˆ˜ê°€ ì˜í¬ë¥¼ ë¶€ì •ì ìœ¼ë¡œ ë§Œë“¦</li>
                                </ul>
                            </li>
                             <li><strong>$e$ (ì˜í¬ â†’ ì² ìˆ˜):</strong> ì˜í¬ì˜ ê°ì •ì´ ì² ìˆ˜ì—ê²Œ ë¯¸ì¹˜ëŠ” ì˜í–¥
                                <ul class="list-circle list-outside pl-6 text-gray-400">
                                    <li>$e > 0$: ì˜í¬ê°€ ì² ìˆ˜ë¥¼ ê¸ì •ì ìœ¼ë¡œ ë§Œë“¦</li>
                                    <li>$e < 0$: ì˜í¬ê°€ ì² ìˆ˜ë¥¼ ë¶€ì •ì ìœ¼ë¡œ ë§Œë“¦</li>
                                </ul>
                            </li>
                            <li><strong>$d$ (ì² ìˆ˜ ìê¸° ì˜í–¥):</strong> ì² ìˆ˜ê°€ ìì‹ ì˜ ê°ì •ì— ë¯¸ì¹˜ëŠ” ì˜í–¥
                                <ul class="list-circle list-outside pl-6 text-gray-400">
                                    <li>$d > 0$: ìê¸°ì•  (ê°ì •ì´ ìŠ¤ìŠ¤ë¡œ ì¦í­)</li>
                                    <li>$d < 0$: ìê°€ ì–µì œ (ê°ì •ì´ ìŠ¤ìŠ¤ë¡œ ì‹ìŒ)</li>
                                </ul>
                            </li>
                            <li><strong>$c, f$ (ì™¸ë¶€ ì˜í–¥):</strong> ë‚ ì”¨, ì´ë²¤íŠ¸ ë“± ì™¸ë¶€ ìš”ì¸ (ë³¸ ì‹œë®¬ë ˆì´ì…˜ì—ì„œëŠ” 0)</li>
                        </ul>
                    </div>
                </div>

                <!-- ì•„ì½”ë””ì–¸ 3: ì‹œë®¬ë ˆì´ì…˜ ì›ë¦¬ -->
                <div class="accordion-item bg-gray-800 rounded-lg shadow-lg border border-gray-700">
                    <button class="accordion-button w-full flex justify-between items-center text-left p-6">
                        <span class="text-xl font-semibold text-gray-100">3. ì‹œë®¬ë ˆì´ì…˜ ì›ë¦¬: ì˜¤ì¼ëŸ¬ ë°©ë²• (Euler Method)</span>
                        <svg class="w-6 h-6 text-gray-400 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <div class="accordion-content px-6 pb-6 text-lg">
                        <p class="text-gray-300 leading-relaxed mb-4">
                            ì»´í“¨í„°ëŠ” ì´ ë°©ì •ì‹ì„ $dt$ë¼ëŠ” ì•„ì£¼ ì‘ì€ ì‹œê°„ ê°„ê²©ìœ¼ë¡œ ìª¼ê°œì„œ ê³„ì‚°í•©ë‹ˆë‹¤. 'ë‹¤ìŒ ì‹œì ì˜ ê°ì •'ì€ 'í˜„ì¬ ê°ì •'ì— 'í˜„ì¬ ê³„ì‚°ëœ ê°ì • ë³€í™”ìœ¨($dx/dt$) $\times$ $dt$'ë¥¼ ë”í•˜ì—¬ ê·¼ì‚¬í•©ë‹ˆë‹¤.
                        </p>
                        <div class="formula">
                            $x(t + dt) = x(t) + (a \cdot x(t) + b \cdot y(t)) \cdot dt$
                            <br>
                            $y(t + dt) = y(t) + (e \cdot x(t) + d \cdot y(t)) \cdot dt$
                        </div>
                        <p class="text-gray-400 mt-4">
                            ì´ ê³¼ì •ì„ 0ì´ˆë¶€í„° 50ì´ˆê¹Œì§€ ìˆ˜ë°± ë²ˆ ë°˜ë³µí•˜ì—¬ ë¯¸ë˜ì˜ ê°ì • ë³€í™” ê³¡ì„ ì„ ê·¸ë ¤ëƒ…ë‹ˆë‹¤.
                        </p>
                    </div>
                </div>

            </div>
        </section>

    </div>

    <script>
    (function() {
        let loveChart; // ì°¨íŠ¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì €ì¥í•  ë³€ìˆ˜
        const chartCanvas = document.getElementById('loveChart').getContext('2d');
        const interpretationText = document.getElementById('interpretation-text');

        // --- ì‹œë®¬ë ˆì´ì…˜ ë¡œì§ ---
        /**
         * @param {object} params - {a, b, e, d, x0, y0, c, f}
         * @param {number} t_max - ì‹œë®¬ë ˆì´ì…˜ ì´ ì‹œê°„
         * @param {number} dt - ì‹œê°„ ê°„ê²©
         * @returns {object} - { t_labels, x_history, y_history }
         */
        function runSimulation(params, t_max = 50, dt = 0.05) {
            let x = params.x0;
            let y = params.y0;
            const { a, b, e, d, c, f } = params;

            const t_labels = [];
            const x_history = [];
            const y_history = [];

            for (let t = 0; t <= t_max; t += dt) {
                t_labels.push(t.toFixed(1));
                x_history.push(x);
                y_history.push(y);

                const dx_dt = a * x + b * y + c;
                const dy_dt = e * x + d * y + f;

                x = x + dx_dt * dt;
                y = y + dy_dt * dt;
            }
            return { t_labels, x_history, y_history };
        }

        // --- ì°¨íŠ¸ ì—…ë°ì´íŠ¸ ---
        function updateChart(data) {
            if (loveChart) {
                loveChart.data.labels = data.t_labels;
                loveChart.data.datasets[0].data = data.x_history;
                loveChart.data.datasets[1].data = data.y_history;
                loveChart.update();
            } else {
                loveChart = new Chart(chartCanvas, {
                    type: 'line',
                    data: {
                        labels: data.t_labels,
                        datasets: [
                            {
                                label: 'ì˜í¬ (x) ê°ì •',
                                data: data.x_history,
                                borderColor: '#EC4899', // Pink
                                backgroundColor: '#EC489930',
                                borderWidth: 3,
                                fill: false,
                                tension: 0.1
                            },
                            {
                                label: 'ì² ìˆ˜ (y) ê°ì •',
                                data: data.y_history,
                                borderColor: '#3B82F6', // Blue
                                backgroundColor: '#3B82F630',
                                borderWidth: 3,
                                fill: false,
                                tension: 0.1
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'top',
                                labels: { color: '#E5E7EB', font: { size: 14 } }
                            },
                            tooltip: {
                                mode: 'index',
                                intersect: false,
                                callbacks: {
                                    title: (tooltipItems) => `Time: ${tooltipItems[0].label}s`,
                                }
                            }
                        },
                        scales: {
                            x: {
                                title: { display: true, text: 'ì‹œê°„ (Time)', color: '#9CA3AF' },
                                ticks: { color: '#9CA3AF' },
                                grid: { color: '#374151' }
                            },
                            y: {
                                title: { display: true, text: 'ê°ì • ìˆ˜ì¤€ (Emotional Level)', color: '#9CA3AF' },
                                ticks: { color: '#9CA3AF' },
                                grid: { color: '#374151' }
                            }
                        },
                        elements: {
                            point: { radius: 0, hitRadius: 10, hoverRadius: 5 }
                        }
                    }
                });
            }
        }

        // --- [ìˆ˜ì •ë¨] í•´ì„ ì—…ë°ì´íŠ¸ ---
        function updateInterpretation(params) {
            let html = "";
            const { a, b, e, d } = params;

            // 1. ìê¸° ì˜í–¥ (a, d)
            if (a < -0.05) {
                html += `<p><strong>ì˜í¬(x)</strong>ëŠ” <span class="text-blue-400">ìê°€ ì–µì œì  (a=${a.toFixed(2)})</span>ì…ë‹ˆë‹¤. í˜¼ì ìˆìœ¼ë©´ ê°ì •ì´ ì‹ëŠ” ê²½í–¥ì´ ìˆìŠµë‹ˆë‹¤.</p>`;
            } else if (a > 0.05) {
                html += `<p><strong>ì˜í¬(x)</strong>ëŠ” <span class="text-pink-400">ìê¸° ì¦í­ì  (a=${a.toFixed(2)})</span>ì…ë‹ˆë‹¤. í˜¼ì ìˆì–´ë„ ê°ì •ì´ ì»¤ì§€ëŠ” ê²½í–¥ì´ ìˆìŠµë‹ˆë‹¤.</p>`;
            } else {
                html += `<p><strong>ì˜í¬(x)</strong>ëŠ” ê°ì •ì ìœ¼ë¡œ <span class="text-gray-400">ë…ë¦½ì  (a=${a.toFixed(2)})</span>ì…ë‹ˆë‹¤.</p>`;
            }
            
            if (d < -0.05) {
                html += `<p><strong>ì² ìˆ˜(y)</strong>ëŠ” <span class="text-blue-400">ìê°€ ì–µì œì  (d=${d.toFixed(2)})</span>ì…ë‹ˆë‹¤. í˜¼ì ìˆìœ¼ë©´ ê°ì •ì´ ì‹ëŠ” ê²½í–¥ì´ ìˆìŠµë‹ˆë‹¤.</p>`;
            } else if (d > 0.05) {
                html += `<p><strong>ì² ìˆ˜(y)</strong>ëŠ” <span class="text-pink-400">ìê¸° ì¦í­ì  (d=${d.toFixed(2)})</span>ì…ë‹ˆë‹¤. í˜¼ì ìˆì–´ë„ ê°ì •ì´ ì»¤ì§€ëŠ” ê²½í–¥ì´ ìˆìŠµë‹ˆë‹¤.</p>`;
            } else {
                html += `<p><strong>ì² ìˆ˜(y)</strong>ëŠ” ê°ì •ì ìœ¼ë¡œ <span class="text-gray-400">ë…ë¦½ì  (d=${d.toFixed(2)})</span>ì…ë‹ˆë‹¤.</p>`;
            }

            // 2. ìƒí˜¸ ì˜í–¥ (b, e)
            if (b > 0.05) {
                html += `<p>ì² ìˆ˜(y)ì˜ ê°ì •ì€ ì˜í¬(x)ì—ê²Œ <span class="text-green-400">ê¸ì •ì  ì˜í–¥ (b=${b.toFixed(2)})</span>ì„ ì¤ë‹ˆë‹¤.</p>`;
            } else if (b < -0.05) {
                html += `<p>ì² ìˆ˜(y)ì˜ ê°ì •ì€ ì˜í¬(x)ì—ê²Œ <span class="text-red-400">ë¶€ì •ì ì¸ ì˜í–¥ (b=${b.toFixed(2)})</span>ì„ ì¤ë‹ˆë‹¤.</p>`;
            } else {
                html += `<p>ì² ìˆ˜(y)ëŠ” ì˜í¬(x)ì—ê²Œ <span class="text-gray-400">ë³„ë‹¤ë¥¸ ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤ (b=${b.toFixed(2)}).</span></p>`;
            }

            if (e > 0.05) {
                html += `<p>ì˜í¬(x)ì˜ ê°ì •ì€ ì² ìˆ˜(y)ì—ê²Œ <span class="text-green-400">ê¸ì •ì  ì˜í–¥ (e=${e.toFixed(2)})</span>ì„ ì¤ë‹ˆë‹¤.</p>`;
            } else if (e < -0.05) {
                html += `<p>ì˜í¬(x)ì˜ ê°ì •ì€ ì² ìˆ˜(y)ì—ê²Œ <span class="text-red-400">ë¶€ì •ì ì¸ ì˜í–¥ (e=${e.toFixed(2)})</span>ì„ ì¤ë‹ˆë‹¤.</p>`;
            } else {
                html += `<p>ì˜í¬(x)ëŠ” ì² ìˆ˜(y)ì—ê²Œ <span class="text-gray-400">ë³„ë‹¤ë¥¸ ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤ (e=${e.toFixed(2)}).</span></p>`;
            }

            // 3. [ìˆ˜ì •ë¨] ë™ì  ì¢…í•© ë¶„ì„ (Trace & Determinant)
            const T = a + d; // Trace
            const D = a * d - b * e; // Determinant
            const D_sqrt = T * T - 4 * D; // íŒë³„ì‹ (Discriminant)
            
            let conclusion = "";

            if (D < 0) {
                conclusion = "ì´ ì¡°í•©ì€ <strong>'ë§ì„¤ì´ëŠ” ì»¤í”Œ (Saddle Point)'</strong> ìœ í˜•ì…ë‹ˆë‹¤. (D < 0)<br>ë‘ ì‚¬ëŒì˜ ê°ì •ì€ ì´ˆê¸° ì¡°ê±´ì— ë”°ë¼ ê·¹ëª…í•˜ê²Œ ê°ˆë¦½ë‹ˆë‹¤. í•œìª½ì€ ê¸ì •ìœ¼ë¡œ, ë‹¤ë¥¸ ìª½ì€ ë¶€ì •ìœ¼ë¡œ ë°œì‚°í•˜ê¸° ì‰¬ìš´ ë¶ˆì•ˆì •í•œ ìƒíƒœì…ë‹ˆë‹¤.";
            } else { // D >= 0
                if (T < -0.01) { // 0ë³´ë‹¤ í™•ì‹¤íˆ ì‘ì„ ë•Œ
                    if (D_sqrt >= 0) {
                        conclusion = "ì´ ì¡°í•©ì€ <strong>'ì•ˆì •ì ì¸ ì»¤í”Œ (Stable Node)'</strong> ìœ í˜•ì…ë‹ˆë‹¤. (T < 0, D > 0)<br>ê°ì •ì˜ ì§„ë™ ì—†ì´, ë‘ ì‚¬ëŒì˜ ê°ì •ì€ ì‹œê°„ì´ ì§€ë‚¨ì— ë”°ë¼ ì•ˆì •ì ì¸ 0 (ë¬´ê´€ì‹¬)ìœ¼ë¡œ ì ì°¨ ìˆ˜ë ´í•©ë‹ˆë‹¤.";
                    } else {
                        conclusion = "ì´ ì¡°í•©ì€ <strong>'ì•ˆì •ì ì¸ ì»¤í”Œ (Stable Spiral)'</strong> ìœ í˜•ì…ë‹ˆë‹¤. (T < 0, D > 0)<br>ì•½ê°„ì˜ ê°ì • ê¸°ë³µ(ì§„ë™)ì„ ê²ªìœ¼ë©°, ë‘ ì‚¬ëŒì˜ ê°ì •ì€ ê²°êµ­ ì•ˆì •ì ì¸ 0 (ë¬´ê´€ì‹¬)ìœ¼ë¡œ ìˆ˜ë ´í•©ë‹ˆë‹¤.";
                    }
                } else if (T > 0.01) { // 0ë³´ë‹¤ í™•ì‹¤íˆ í´ ë•Œ
                    if (D_sqrt >= 0) {
                        conclusion = "ì´ ì¡°í•©ì€ <strong>'ì—´ì •ì /í­ë°œì  ì‚¬ë‘ (Unstable Node)'</strong> ìœ í˜•ì…ë‹ˆë‹¤. (T > 0, D > 0)<br>ê°ì •ì˜ ì§„ë™ ì—†ì´, ë‘ ì‚¬ëŒì˜ ê°ì •ì€ ì„œë¡œë¥¼ ì¦í­ì‹œí‚¤ë©° ì‹œê°„ì´ ì§€ë‚¨ì— ë”°ë¼ ê¸ì •ì (ë˜ëŠ” ë¶€ì •ì )ìœ¼ë¡œ ë¬´í•œíˆ ë°œì‚°í•©ë‹ˆë‹¤.";
                    } else {
                        conclusion = "ì´ ì¡°í•©ì€ <strong>'íŒŒë©¸ì /ê²©ì •ì  ê´€ê³„ (Unstable Spiral)'</strong> ìœ í˜•ì…ë‹ˆë‹¤. (T > 0, D > 0)<br>ë‘ ì‚¬ëŒì˜ ê°ì •ì€ ê²©ë ¬í•œ ê¸°ë³µ(ì§„ë™)ì„ ê²ªìœ¼ë©°, ê·¸ ì§„í­ì´ ì ì  ì»¤ì§€ë©´ì„œ ê·¹ë‹¨ì ìœ¼ë¡œ ë°œì‚°í•©ë‹ˆë‹¤.";
                    }
                } else { // Tê°€ 0ì— ê°€ê¹Œìš¸ ë•Œ
                    conclusion = "ì´ ì¡°í•©ì€ <strong>'ì¤‘ë¦½ì  ê¶¤ë„ (Center)'</strong> ìœ í˜•ì…ë‹ˆë‹¤. (T â‰ˆ 0, D > 0)<br>ê°ì •ì´ ì•ˆì •ë˜ê±°ë‚˜ ë°œì‚°í•˜ì§€ ì•Šê³ , ì´ˆê¸° ì¡°ê±´ì— ë”°ë¼ ì¼ì •í•œ ì£¼ê¸°ë¥¼ ê·¸ë¦¬ë©° ì˜ì›íˆ ì§„ë™í•©ë‹ˆë‹¤.";
                }
            }

            html += `<p class="mt-6 pt-4 border-t border-gray-600 text-base"><strong>[ì¢…í•© í•´ì„]</strong> ${conclusion}</p>`;
            html += `<p class="text-sm text-gray-400 mt-2">(Trace T = ${T.toFixed(3)}, Determinant D = ${D.toFixed(3)})</p>`;
            
            interpretationText.innerHTML = html;
        }

        // --- ì»¨íŠ¸ë¡¤ëŸ¬ ---
        const inputs = {
            a: document.getElementById('param-a'),
            b: document.getElementById('param-b'),
            e: document.getElementById('param-e'),
            d: document.getElementById('param-d'),
            x0: document.getElementById('param-x0'),
            y0: document.getElementById('param-y0'),
        };

        const values = {
            a: document.getElementById('val-a'),
            b: document.getElementById('val-b'),
            e: document.getElementById('val-e'),
            d: document.getElementById('val-d'),
            x0: document.getElementById('val-x0'),
            y0: document.getElementById('val-y0'),
        };

        // ìŠ¬ë¼ì´ë” ê°’ í‘œì‹œ ì—…ë°ì´íŠ¸
        for (const key in inputs) {
            inputs[key].addEventListener('input', (event) => {
                values[key].textContent = parseFloat(event.target.value).toFixed(2);
                runFullSimulation(); // ìŠ¬ë¼ì´ë” ì¡°ì‘ ì‹œ ì‹¤ì‹œê°„ìœ¼ë¡œ ë‹¤ì‹œ ì‹¤í–‰
            });
        }
        
        // í˜„ì¬ ìŠ¬ë¼ì´ë” ê°’ìœ¼ë¡œ ì‹œë®¬ë ˆì´ì…˜ ì‹¤í–‰
        function runFullSimulation() {
            const params = {
                a: parseFloat(inputs.a.value),
                b: parseFloat(inputs.b.value),
                e: parseFloat(inputs.e.value),
                d: parseFloat(inputs.d.value),
                x0: parseFloat(inputs.x0.value),
                y0: parseFloat(inputs.y0.value),
                c: 0, // ì™¸ë¶€ ìš”ì¸ c, fëŠ” 0ìœ¼ë¡œ ê³ ì •
                f: 0
            };
            
            const data = runSimulation(params);
            updateChart(data);
            updateInterpretation(params); // í•´ì„ë„ ë™ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸
        }
        
        // [ìˆ˜ì •ë¨] í”„ë¦¬ì…‹ ë²„íŠ¼ ë¡œì§ (ìˆ˜í•™ì ìœ¼ë¡œ ì˜¬ë°”ë¥¸ ê°’)
        function setParams(p) {
            Object.keys(p).forEach(key => {
                if(inputs[key]) {
                    inputs[key].value = p[key];
                    values[key].textContent = p[key].toFixed(2);
                }
            });
            runFullSimulation();
        }

        document.getElementById('preset-destructive').addEventListener('click', () => {
            // "íŒŒë©¸ì  ê´€ê³„" (Unstable Spiral: T > 0, D > 0, TÂ²-4D < 0)
            setParams({ a: 0.1, b: 0.8, e: -0.6, d: 0.1, x0: 1.0, y0: 0.5 });
        });
        
        document.getElementById('preset-stable').addEventListener('click', () => {
            // "ì•ˆì •ì  ì»¤í”Œ" (Stable Node: T < 0, D > 0, TÂ²-4D > 0)
            setParams({ a: -0.5, b: 0.2, e: 0.2, d: -0.5, x0: 1.0, y0: 1.0 });
        });

        document.getElementById('preset-hesitation').addEventListener('click', () => {
            // "ë§ì„¤ì´ëŠ” ì»¤í”Œ" (Saddle Point: D < 0)
            setParams({ a: -0.2, b: 0.8, e: 0.3, d: 0.1, x0: 1.0, y0: 0.5 });
        });
        
        document.getElementById('preset-explosive').addEventListener('click', () => {
            // "ì—´ì •ì  ì‚¬ë‘" (Unstable Node: T > 0, D > 0, TÂ²-4D > 0)
            setParams({ a: 0.3, b: 0.2, e: 0.2, d: 0.3, x0: 0.5, y0: 0.5 });
        });


        // --- ì•„ì½”ë””ì–¸ ìŠ¤í¬ë¦½íŠ¸ ---
        document.querySelectorAll('.accordion-button').forEach(button => {
            button.addEventListener('click', () => {
                const content = button.nextElementSibling;
                const icon = button.querySelector('svg');
                const isOpening = content.style.display !== 'block';
                
                if (isOpening) {
                    content.style.display = 'block';
                    icon.style.transform = 'rotate(180deg)';
                } else {
                    content.style.display = 'none';
                    icon.style.transform = 'rotate(0deg)';
                }
            });
        });

        // --- [ìˆ˜ì •ë¨] ì´ˆê¸° ì‹¤í–‰ ---
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìˆ˜ì •ëœ 'íŒŒë©¸ì ì¸ ê´€ê³„' í”„ë¦¬ì…‹ìœ¼ë¡œ ì´ˆê¸°í™”
        setParams({ a: 0.1, b: 0.8, e: -0.6, d: 0.1, x0: 1.0, y0: 0.5 });

    })();
    </script>
</body>
</html>
